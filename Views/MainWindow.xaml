<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:RamanSoftwareV2.ViewModels"
        mc:Ignorable="d"
        x:Class="RamanSoftwareV2.Views.MainWindow"
        Title="Raman Analysis Software" Height="800" Width="1300">

    <DockPanel>

        <!-- #region 菜单区域 -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File"/>
            <MenuItem Header="View"/>
            <MenuItem Header="Device">
                <MenuItem Header="Equipment Calibration"
                          Command="{Binding EquipmentCalibrationCommand}" />

                <MenuItem Header="Connection Settings"
                          Command="{Binding OpenConnectionSettingsCommand}" />
            </MenuItem>
            <MenuItem Header="Setting"/>
            <MenuItem Header="SampleLib"/>
            <MenuItem Header="Tool"/>
            <MenuItem Header="Help"/>
        </Menu>
        <!-- #endregion -->
        
        
        <!-- #region工具栏：连接、激光、采集、折叠左栏 -->
        <ToolBar DockPanel.Dock="Top" Height="32" Cursor="Hand">

            <!-- 左侧折叠按钮：已绑定命令 -->
            <Button Style="{StaticResource IconButton}"
                    Tag="{StaticResource Icon.EyeOpen}"
                    Command="{Binding ToggleLeftPanelCommand}"
                    Width="23" Padding="1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="4,3,4,1"/>

            <Separator/>

            <!-- 以下按钮将来可绑定命令，现在先保留 UI -->
            <Button Content="{Binding ConnectButtonText}"
                    Command="{Binding ConnectButtonCommand}"
                    />
            <Button Content="Laser Activate" />
            <Button Content="Start" />
            <Button Content="Pause" />

        </ToolBar>
        <!-- #endregion -->

        <!-- #region底部状态栏 -->
        <StatusBar DockPanel.Dock="Bottom" Background="#E0E0E0" Height="28">

            <StatusBar.ItemsPanel>
                <ItemsPanelTemplate>
                    <DockPanel LastChildFill="False"/>
                </ItemsPanelTemplate>
            </StatusBar.ItemsPanel>

            <!-- 时间：最右 -->
            <StatusBarItem DockPanel.Dock="Right" Margin="12,0">
                <TextBlock Text="{Binding SystemTime}" 
                           Foreground="#555"
                           FontWeight="SemiBold"/>
            </StatusBarItem>

            <Separator DockPanel.Dock="Right" Margin="6,0"/>
            <Separator DockPanel.Dock="Right" Margin="0" Background="Transparent"/>

            <!-- 激光状态 -->
            <StatusBarItem DockPanel.Dock="Right" Margin="12,0">
                <TextBlock Text="{Binding LaserStatus}" 
                           Foreground="#555" FontWeight="SemiBold"/>
            </StatusBarItem>

            <Separator DockPanel.Dock="Right" Margin="6,0"/>

            <!-- 连接状态 -->
            <StatusBarItem DockPanel.Dock="Right" Margin="12,0">
                <TextBlock Text="{Binding ConnectionStatus}" 
                           Foreground="#555" FontWeight="SemiBold"/>
            </StatusBarItem>

        </StatusBar>
        <!-- #endregion -->

        <!-- #region中间区域 -->
        <Grid>

            <!-- 左右布局 -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{Binding LeftPanelWidth}"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- #region左侧面板 -->
            <ScrollViewer Grid.Column="0"
              VerticalScrollBarVisibility="Hidden">

                <Border Grid.Column="0" Padding="8" CornerRadius="6" BorderBrush="#8A8A8A" BorderThickness="1.5,1.5,1.5,1.5" SnapsToDevicePixels="True">

                    <StackPanel>


                        <!-- ======================= 工程参数 ======================= -->
                        <Border BorderBrush="#C0C0C0" BorderThickness="1" CornerRadius="4" Margin="0,0,0,8">
                            <Expander Header="Engineering Parameters" IsExpanded="True">
                                <Grid Margin="4">

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="2"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- 采样周期 -->
                                    <CheckBox Grid.Row="0" Grid.Column="0" Margin="0,4,4,4" VerticalAlignment="Center"/>
                                    <TextBlock Text="Sampling Interval:" 
                                   Grid.Row="0" Grid.Column="1" Margin="4"
                                   VerticalAlignment="Center"/>

                                    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="4">
                                        <TextBox Width="80" Margin="0,0,6,0"/>
                                        <ComboBox Width="60" SelectedIndex="1">
                                            <ComboBoxItem Content="s"/>
                                            <ComboBoxItem Content="min"/>
                                            <ComboBoxItem Content="h"/>
                                            <ComboBoxItem Content="day"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <!-- 检测时长 -->
                                    <CheckBox Grid.Row="3" Grid.Column="0" Margin="0,4,4,4" VerticalAlignment="Center"/>
                                    <TextBlock Text="Detection Duration:" 
                                   Grid.Row="3" Grid.Column="1" Margin="4"
                                   VerticalAlignment="Center"/>

                                    <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal" Margin="4">
                                        <TextBox Width="80" Margin="0,0,6,0"/>
                                        <ComboBox Width="60" SelectedIndex="3">
                                            <ComboBoxItem Content="s"/>
                                            <ComboBoxItem Content="min"/>
                                            <ComboBoxItem Content="h"/>
                                            <ComboBoxItem Content="day"/>
                                        </ComboBox>
                                    </StackPanel>

                                </Grid>
                            </Expander>
                        </Border>




                        <!-- ======================= 采集参数 ======================= -->
                        <Border BorderBrush="#C0C0C0" BorderThickness="1" CornerRadius="4" Margin="0,0,0,8">
                            <Expander Header="Collection Parameters" IsExpanded="True">
                                <Grid Margin="4">

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="2"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- 积分时间 -->
                                    <TextBlock Text="Integral Time:" Grid.Row="0" Margin="4" VerticalAlignment="Center"/>

                                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="26,4,4,4">
                                        <TextBox Width="80" Margin="0,0,6,0"/>
                                        <ComboBox Width="60" SelectedIndex="0">
                                            <ComboBoxItem Content="ms"/>
                                            <ComboBoxItem Content="s"/>
                                            <ComboBoxItem Content="min"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <!-- 采样次数 -->
                                    <TextBlock Text="Sample Count:" Grid.Row="3" Margin="4" VerticalAlignment="Center"/>

                                    <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="26,4,4,4">
                                        <TextBox Width="80" Margin="0,0,6,0"/>
                                        <TextBlock Text="times" VerticalAlignment="Center"/>
                                    </StackPanel>

                                </Grid>
                            </Expander>
                        </Border>



                        <!-- ======================= 文件列表 ======================= -->
                        <Border BorderBrush="#C0C0C0" BorderThickness="1" CornerRadius="4" Margin="0,0,0,8">
                            <Expander Header="文件列表" IsExpanded="True">
                                <Border Margin="4" Padding="4"
                            BorderBrush="#CCCCCC" BorderThickness="1"
                            CornerRadius="4" >

                                    <DockPanel>

                                        <!-- 标题栏 -->
                                        <Grid DockPanel.Dock="Top" Margin="0,0,0,6">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="数据列表"  FontSize="16" FontWeight="Bold" VerticalAlignment="Center"/>

                                            <!--<Button Grid.Column="1" Content="设置" Width="40" Height="22" Margin="10,0,0,0" VerticalAlignment="Center"/>-->
                                        </Grid>


                                        <!-- 文件列表 -->
                                        <ScrollViewer Height="200" VerticalScrollBarVisibility="Auto">
                                            <ItemsControl x:Name="FileListBox">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border BorderThickness="0,0,0,1" BorderBrush="#DDDDDD" Padding="4">
                                                            <TextBlock Text="{Binding}" FontSize="13"/>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>

                                    </DockPanel>
                                </Border>
                            </Expander>
                        </Border>




                        <!-- ======================= 状态监控 ======================= -->
                        <Border BorderBrush="#C0C0C0" BorderThickness="1" CornerRadius="4" Margin="0,0,0,8">
                            <Expander Header="Status Monitoring" IsExpanded="True">
                                <Grid Margin="4">

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Text="Frame Number:" Grid.Row="0" Grid.Column="0" Margin="4"/>
                                    <TextBox Width="100" Grid.Row="0" Grid.Column="1" Margin="4"/>

                                    <TextBlock Text="Accumulations:" Grid.Row="1" Grid.Column="0" Margin="4"/>
                                    <TextBox Width="100" Grid.Row="1" Grid.Column="1" Margin="4"/>

                                    <TextBlock Text="CCD Status:" Grid.Row="2" Grid.Column="0" Margin="4"/>
                                    <TextBox Width="100" Grid.Row="2" Grid.Column="1" Margin="4"/>

                                    <TextBlock Text="CCD Temperature:" Grid.Row="3" Grid.Column="0" Margin="4"/>
                                    <TextBox Width="100" Grid.Row="3" Grid.Column="1" Margin="4"/>

                                    <TextBlock Text="Laser Temperature:" Grid.Row="4" Grid.Column="0" Margin="4"/>
                                    <TextBox Width="100" Grid.Row="4" Grid.Column="1" Margin="4"/>
                                </Grid>
                            </Expander>
                        </Border>




                        <!-- ======================= 数据处理 ======================= -->
                        <Border BorderBrush="#C0C0C0" BorderThickness="1" CornerRadius="4" Margin="0,0,0,8">
                            <Expander Header="Data Processing" IsExpanded="True">
                                <StackPanel Margin="4">
                                    <CheckBox Content="WT Noise reduction" Margin="4"/>
                                    <CheckBox Content="Background Noise Reduction" Margin="4"/>

                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="Parameter" Margin="4"/>
                                        <Button Content="More" Margin="4"/>
                                    </StackPanel>
                                </StackPanel>
                            </Expander>
                        </Border>


                    </StackPanel>
                </Border>

            </ScrollViewer>
            <!--#endregion-->


            <!-- #region右侧图表 -->
            <TabControl Grid.Column="1" Margin="8">
                <TabItem Header="Raw Spectrum">
                    <oxy:PlotView Model="{Binding RawPlotModel}"/>
                </TabItem>

                <TabItem Header="Preprocessed Spectrum">
                    <oxy:PlotView Model="{Binding PreprocessedPlotModel}"/>
                </TabItem>

                <TabItem Header="Analyzed Spectrum">
                    <oxy:PlotView Model="{Binding AnalyzedPlotModel}"/>
                </TabItem>
            </TabControl>
            <!--#endregion-->
        

        </Grid>
        <!--#endregion-->
    </DockPanel>
</Window>
